{% extends "featured/base.html" %}
{% load i18n %}
{% load remove_url_scheme %}
{% load date %}

{% block title %}
    {% trans "Liste des requêtes pour des unes" %}
{% endblock %}



{% block breadcrumb %}
    <li>{% trans "Liste des requêtes pour des unes" %}</li>
{% endblock %}



{% block headline %}
    {% trans "Liste des requêtes pour des unes" %}
{% endblock %}



{% block content %}
    {% if featured_request_list %}

        {% include "misc/paginator.html" with position="top" %}

        <table class="fullwidth">
            <thead>
                <tr>
                    <th>{% trans "Titre" %}</th>
                    <th width="5%">{% trans "Type" %}</th>
                    <th width="10%">{% trans "Votes" %}</th>
                    <th>{% trans "Actions" %}</th>
                </tr>
            </thead>
            <tbody>
            {% for featured_request in featured_request_list%}
                <tr class="featured-request">
                    <td>
                        <a href="{% if featured_request.type == 'TOPIC' %}{{ featured_request.content_object.get_absolute_url }}{% else %}{{ featured_request.content_object.get_absolute_url_online }}{% endif %}">
                            {{ featured_request.content_object.title }}
                        </a>
                    </td>
                    <td>
                        {% if featured_request.type == 'TOPIC' %}
                            {% trans "Topic" %}
                        {% else %}
                            {% if  featured_request.content_object.type == 'ARTICLE' %}
                                {% trans "Article" %}
                            {% else %}
                                {% trans "Tutoriel" %}
                            {% endif %}
                        {% endif %}
                    </td>
                    <td>{{ featured_request.num_vote }}</td>
                    <td>
                        {%  if featured_request.rejected %}
                            <button type="button" class="btn btn-grey ico-after cross unpick-action" data-url="{% url 'featured-resource-request-update' featured_request.pk %}"
                                    data-operation="CONSIDER">{% trans "Ne plus ignorer" %}</button>
                        {% else %}
                            <button type="button" class="btn btn-grey ico-after hide unpick-action" data-url="{% url 'featured-resource-request-update' featured_request.pk %}"
                                    data-operation="REJECT">{% trans "Ignorer" %}</button>
                        {% endif %}

                        <a href="{% url "featured-resource-create" %}?content_type={% if featured_request.type == 'TOPIC' %}topic{% else %}published_content{% endif %}&amp;content_id={{ featured_request.content_object.pk }}">
                            <button type="button" class="btn btn-grey ico-after star">{% trans "Nouvelle une" %}</button>
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>


        {% include "misc/paginator.html" with position="bottom" %}

    {% else %}
        <p>
            {% trans "Aucune requête pour le moment." %}
        </p>
    {% endif %}
{% endblock %}

